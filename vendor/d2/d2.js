!function(){"use strict";var t="undefined"==typeof global?self:global;if("function"!=typeof t.require){var e={},n={},i={},r={}.hasOwnProperty,s=/^\.\.?(\/|$)/,o=function(t,e){for(var n,i=[],r=(s.test(e)?t+"/"+e:e).split("/"),o=0,a=r.length;o<a;o++)n=r[o],".."===n?i.pop():"."!==n&&""!==n&&i.push(n);return i.join("/")},a=function(t){return t.split("/").slice(0,-1).join("/")},h=function(e){return function(n){var i=o(a(e),n);return t.require(i,e)}},c=function(t,e){var i=g&&g.createHot(t),r={id:t,exports:{},hot:i};return n[t]=r,e(r.exports,h(t),r),r.exports},u=function(t){return i[t]?u(i[t]):t},p=function(t,e){return u(o(a(t),e))},l=function(t,i){null==i&&(i="/");var s=u(t);if(r.call(n,s))return n[s].exports;if(r.call(e,s))return c(s,e[s]);throw new Error("Cannot find module '"+t+"' from '"+i+"'")};l.alias=function(t,e){i[e]=t};var f=/\.[^.\/]+$/,y=/\/index(\.[^\/]+)?$/,v=function(t){if(f.test(t)){var e=t.replace(f,"");r.call(i,e)&&i[e].replace(f,"")!==e+"/index"||(i[e]=t)}if(y.test(t)){var n=t.replace(y,"");r.call(i,n)||(i[n]=t)}};l.register=l.define=function(t,i){if(t&&"object"==typeof t)for(var s in t)r.call(t,s)&&l.register(s,t[s]);else e[t]=i,delete n[t],v(t)},l.list=function(){var t=[];for(var n in e)r.call(e,n)&&t.push(n);return t};var g=t._hmr&&new t._hmr(p,l,e,n);l._cache=n,l.hmr=g&&g.wrap,l.brunch=!0,t.require=l}}(),function(){"undefined"==typeof window?this:window;require.register("d2.js",function(t,e,n){"use strict";var i={};e("./shapes/point")(i),e("./shapes/line")(i),e("./shapes/segment")(i),e("./shapes/vector")(i),e("./shapes/polygon")(i),e("./shapes/rectangle")(i),e("./shapes/hexagon")(i),e("./shapes/arc")(i),e("./shapes/circle")(i),e("./shapes/roundrectangle")(i),e("./shapes/oval")(i),e("./shapes/utils")(i),n.exports=i}),require.register("shapes/arc.js",function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n.exports=function(t){t.Arc=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new t.Point,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:360;i(this,e),this.pc=n,this.r=r,this.startAngle=s,this.endAngle=o}return r(e,[{key:"contains",value:function(e){if(t.utils.GE(this.pc.distanceTo(e),this.r))return!1;var n=360-new t.Vector(this.pc,e).slope,i=this.sweep;return this.endAngle>0?this.startAngle+i>360?(i=this.startAngle+i-360,t.utils.GE(n,this.startAngle)||t.utils.GE(i,n)):t.utils.GE(n,this.startAngle)&&t.utils.GE(this.startAngle+i,n):this.startAngle-this.sweep>0?t.utils.GE(this.startAngle,n)&&t.utils.GE(n,this.startAngle-this.sweep):(i=360-(this.sweep-this.startAngle),t.utils.GE(this.startAngle,n)||t.utils.GE(n,i))}},{key:"move",value:function(t,e){this.pc.move(t,e)}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};this.pc.rotate(t,e),this.startAngle+=t}},{key:"mirror",value:function(t){this.pc.mirror(t),this.endAngle=-1*this.endAngle,t.isVertical?this.startAngle>=0&&this.startAngle<=180?this.startAngle=180-this.startAngle:this.startAngle=180+(360-this.startAngle):this.startAngle=360-this.startAngle,console.log(this.startAngle)}},{key:"convert",value:function(t,e){var n=360-t,i=0;return i=e>0?360-(t+e):t>Math.abs(e)?n+Math.abs(e):Math.abs(e+t),[n,i]}},{key:"paint",value:function(e){e.beginPath();var n=this.convert(this.startAngle,this.endAngle);e.arc(this.pc.x,this.pc.y,this.r,t.utils.radians(n[0]),t.utils.radians(n[1]),this.endAngle>0),e.stroke()}},{key:"start",get:function(){var e=new t.Point(this.pc.x+this.r,this.pc.y);return e.rotate(this.startAngle,this.pc),e}},{key:"middle",get:function(){var e=this.endAngle>0?this.startAngle+this.sweep/2:this.startAngle-this.sweep/2,n=new t.Point(this.pc.x+this.r,this.pc.y);return n.rotate(e,this.pc),n}},{key:"end",get:function(){var e=new t.Point(this.pc.x+this.r,this.pc.y);return e.rotate(this.startAngle+this.endAngle,this.pc),e}},{key:"sweep",get:function(){return Math.abs(this.endAngle)}}]),e}()}}),require.register("shapes/circle.js",function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n.exports=function(t){t.Circle=function(){function e(t,n){i(this,e),this.pc=t,this.r=n}return r(e,[{key:"clone",value:function(){return new t.Circle(this.pc.clone(),this.r)}},{key:"contains",value:function(e){return t.utils.LE(e.distanceTo(this),this.r)}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};this.pc.rotate(t,e)}},{key:"move",value:function(t,e){this.pc.move(t,e)}},{key:"mirror",value:function(t){this.pc.mirror(t)}},{key:"paint",value:function(t){t.beginPath(),t.arc(this.pc.x,this.pc.y,this.r,0,2*Math.PI,!0),t.stroke()}},{key:"center",get:function(){return this.pc}}]),e}()}}),require.register("shapes/hexagon.js",function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n.exports=function(t){t.Hexagon=function(e){function n(t,e){i(this,n);var s=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return s.center=t,s.width=e,s.reset(),s}return s(n,e),o(n,[{key:"reset",value:function(){var e=2*Math.PI/6,n=2*Math.PI-e/2,i=this.width/2,r=new t.Point(i*Math.cos(0),i*Math.sin(0));r.move(this.center.x,this.center.y),this.add(r);for(var s=e;s<n;s+=e)r=new t.Point(i*Math.cos(s),i*Math.sin(s)),r.move(this.center.x,this.center.y),this.add(r)}}]),n}(t.Polygon)}}),require.register("shapes/line.js",function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n.exports=function(t){t.Line=function(){function e(t,n){i(this,e),this.p1=t,this.p2=n}return r(e,[{key:"projectionPoint",value:function(e){var n=new t.Vector(this.p1,e),i=new t.Vector(this.p1,this.p2),r=n.projectionOn(i),s=this.p1.x+r.x,o=this.p1.y+r.y;return new t.Point(s,o)}},{key:"paint",value:function(t){t.moveTo(this.p1.x,this.p1.y),t.lineTo(this.p2.x,this.p2.y),t.stroke()}},{key:"isHorizontal",get:function(){var e=new t.Vector(this.p1,this.p2),n=new t.Vector(1,0);return t.utils.EQ(e.cross(n),0)}},{key:"isVertical",get:function(){var e=new t.Vector(this.p1,this.p2),n=new t.Vector(0,1);return t.utils.EQ(e.cross(n),0)}}]),e}()}}),require.register("shapes/oval.js",function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function h(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:h(r,e,n)}if("value"in i)return i.value;var s=i.get;if(void 0!==s)return s.call(n)};n.exports=function(t){t.Oval=function(e){function n(t,e,s){i(this,n);var o=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e,s));return o.width=0,o.height=0,o.arc=0,o.segments=[],o.arcs=[],o.setWidth(e),o.setHeight(s),o.reset(),o}return s(n,e),o(n,[{key:"createArc",value:function(e,n,i){var r=360-new t.Vector(e,n).slope,s=(new t.Vector(e,i).slope,new t.Vector(e,n).length);return new t.Arc(e,s,r,180)}},{key:"findArcPoints",value:function(e,n,i,r){var s=e,o=new t.Vector(s,n),a=o.normalize(),h=s.x+this.arc/2*a.x,c=s.y+this.arc/2*a.y,u=new t.Point(h,c);s=r,o=new t.Vector(s,i),a=o.normalize(),h=s.x+this.arc/2*a.x,c=s.y+this.arc/2*a.y;var p=new t.Point(h,c),l=new t.Point((u.x+p.x)/2,(u.y+p.y)/2);return[l,u,p]}},{key:"eval",value:function(t){var e=this.findArcPoints(this.points[0],this.points[1],this.points[2],this.points[3]),n=this.createArc(e[0],e[1],e[2]);n.paint(t),e=this.findArcPoints(this.points[1],this.points[0],this.points[3],this.points[2]),n=this.createArc(e[0],e[2],e[1]),n.paint(t)}},{key:"resize",value:function(t,e,i){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"resize",this).call(this,t,e,i),this.reset()}},{key:"reset",value:function(){this.segments=[],this.arcs=[];var e=new t.Segment(0,0,0,0);this.segments.push(e);var n=new t.Segment(0,0,0,0);this.segments.push(n);var i=this.findArcPoints(this.points[0],this.points[1],this.points[2],this.points[3]);this.arcs.push(this.createArc(i[0],i[1],i[2])),e.ps=i[1].clone(),n.ps=i[2].clone(),i=this.findArcPoints(this.points[1],this.points[0],this.points[3],this.points[2]),this.arcs.push(this.createArc(i[0],i[2],i[1])),e.pe=i[1].clone(),n.pe=i[2].clone()}},{key:"setWidth",value:function(t){this.width=t,t<this.height?this.arc=t:this.arc=this.height}},{key:"setHeight",value:function(t){this.height=t,t<this.width?this.arc=this.height:this.arc=this.width}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"rotate",this).call(this,t,e),this.reset()}},{key:"mirror",value:function(t){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"mirror",this).call(this,t),this.reset(),this.arcs.forEach(function(t){t.endAngle=-1*t.endAngle})}},{key:"paint",value:function(t){this.segments.forEach(function(e){e.paint(t)}),this.arcs.forEach(function(e){e.paint(t)})}}]),n}(t.Rectangle)}}),require.register("shapes/point.js",function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n.exports=function(t){t.Point=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,e),this.x=t,this.y=n}return r(e,[{key:"clone",value:function(){return new t.Point(this.x,this.y)}},{key:"translate",value:function(t){this.x+=t.x,this.y+=t.y}},{key:"scale",value:function(){}},{key:"rotate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},i=-1*t.utils.radians(e),r=n.x+(this.x-n.x)*Math.cos(i)-(this.y-n.y)*Math.sin(i),s=n.y+(this.x-n.x)*Math.sin(i)+(this.y-n.y)*Math.cos(i);this.x=r,this.y=s}},{key:"move",value:function(t,e){this.x+=t,this.y+=e}},{key:"mirror",value:function(e){var n=e.projectionPoint(this),i=new t.Vector(this,n);n.translate(i),this.x=n.x,this.y=n.y}},{key:"distanceTo",value:function(e){if(e instanceof t.Point){var n=e.x-this.x,i=e.y-this.y;return Math.sqrt(n*n+i*i)}if(e instanceof t.Circle){var r=e.center.x-this.x,s=e.center.y-this.y;return Math.sqrt(r*r+s*s)}}},{key:"paint",value:function(e){t.utils.drawCrosshair(e,10,[this])}}]),e}()}}),require.register("shapes/polygon.js",function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n.exports=function(t){t.Polygon=function(){function e(){i(this,e),this.points=[]}return r(e,[{key:"clone",value:function(){var e=new t.Polygon;return this.points.forEach(function(t){e.points.push(t.clone())}),e}},{key:"add",value:function(t){this.points.push(t)}},{key:"contains",value:function(t){for(var e=t.x,n=t.y,i=!1,r=[],s=0,o=this.points.length;s<o;s++)r.push(this.points[s].x,this.points[s].y);for(var a=r.length/2,h=0,c=a-1;h<a;c=h++){var u=r[2*h],p=r[2*h+1],l=r[2*c],f=r[2*c+1],y=p>n!=f>n&&e<(l-u)*((n-p)/(f-p))+u;y&&(i=!i)}return i}},{key:"move",value:function(t,e){this.points.forEach(function(n){n.move(t,e)})}},{key:"mirror",value:function(t){this.points.forEach(function(e){e.mirror(t)})}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};this.points.forEach(function(n){n.rotate(t,e)})}},{key:"paint",value:function(t){t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y);for(var e=1;e<this.points.length;e++)t.lineTo(this.points[e].x,this.points[e].y);t.closePath(),t.stroke()}}]),e}()}}),require.register("shapes/rectangle.js",function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n.exports=function(t){t.Rectangle=function(e){function n(e,s,o){i(this,n);var a=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return a.rounding=10,a.points.push(e.clone()),a.points.push(new t.Point(e.x+s,e.y)),a.points.push(new t.Point(e.x+s,e.y+o)),a.points.push(new t.Point(e.x,e.y+o)),a}return s(n,e),o(n,[{key:"createArc",value:function(e,n,i){var r=360-new t.Vector(e,n).slope,s=new t.Vector(e,i).slope;t.utils.EQ(r,s)&&(s=360);var o=new t.Vector(e,n).length;return new t.Arc(e,o,r,90)}},{key:"eval",value:function(t){var e=this.findArcPoints(this.points[0],this.points[1],this.points[3]),n=this.createArc(e[0],e[1],e[2]);n.paint(t),e=this.findArcPoints(this.points[1],this.points[2],this.points[0]),n=this.createArc(e[0],e[1],e[2]),n.paint(t),e=this.findArcPoints(this.points[2],this.points[3],this.points[1]),n=this.createArc(e[0],e[1],e[2]),n.paint(t),e=this.findArcPoints(this.points[3],this.points[0],this.points[2]),n=this.createArc(e[0],e[1],e[2]),n.paint(t)}},{key:"findArcPoints",value:function(e,n,i){var r=new t.Vector(e,n),s=r.normalize(),o=e.x+this.rounding*s.x,a=e.y+this.rounding*s.y,h=new t.Point(o,a);r=new t.Vector(e,i),s=r.normalize(),o=e.x+this.rounding*s.x,a=e.y+this.rounding*s.y;var c=new t.Point(o,a);r=new t.Vector(e,c),o=h.x+r.x,a=h.y+r.y;var u=new t.Point(o,a);return[u,h,c]}},{key:"resize",value:function(e,n,i){if(i==this.points[2]){var r=this.points[2];r.move(e,n);var s=new t.Vector(this.points[0],r),o=new t.Vector(this.points[0],this.points[1]),a=s.projectionOn(o);this.points[1].x=this.points[0].x+a.x,this.points[1].y=this.points[0].y+a.y,o=new t.Vector(this.points[0],this.points[3]),a=s.projectionOn(o),this.points[3].x=this.points[0].x+a.x,this.points[3].y=this.points[0].y+a.y}else if(i==this.points[1]){var h=this.points[1];h.move(e,n);var c=new t.Vector(this.points[3],h),u=new t.Vector(this.points[3],this.points[0]),p=c.projectionOn(u);this.points[0].x=this.points[3].x+p.x,this.points[0].y=this.points[3].y+p.y,u=new t.Vector(this.points[3],this.points[2]),p=c.projectionOn(u),this.points[2].x=this.points[3].x+p.x,this.points[2].y=this.points[3].y+p.y}else if(i==this.points[3]){var l=this.points[3];l.move(e,n);var f=new t.Vector(this.points[1],l),y=new t.Vector(this.points[1],this.points[0]),v=f.projectionOn(y);this.points[0].x=this.points[1].x+v.x,this.points[0].y=this.points[1].y+v.y,y=new t.Vector(this.points[1],this.points[2]),v=f.projectionOn(y),this.points[2].x=this.points[1].x+v.x,this.points[2].y=this.points[1].y+v.y}else{var g=this.points[0];g.move(e,n);var w=new t.Vector(this.points[2],g),x=new t.Vector(this.points[2],this.points[1]),d=w.projectionOn(x);this.points[1].x=this.points[2].x+d.x,this.points[1].y=this.points[2].y+d.y,x=new t.Vector(this.points[2],this.points[3]),d=w.projectionOn(x),this.points[3].x=this.points[2].x+d.x,this.points[3].y=this.points[2].y+d.y}}},{key:"paint",value:function(t){t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y);for(var e=1;e<this.points.length;e++)t.lineTo(this.points[e].x,this.points[e].y);t.closePath(),t.stroke()}}]),n}(t.Polygon)}}),require.register("shapes/roundrectangle.js",function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function h(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:h(r,e,n)}if("value"in i)return i.value;var s=i.get;if(void 0!==s)return s.call(n)};n.exports=function(t){t.RoundRectangle=function(e){function n(t,e,s,o){i(this,n);var a=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e,s));return a.p1=t,a.width=e,a.height=s,a.rounding=o,a.segments=[],a.arcs=[],a.reset(),a}return s(n,e),o(n,[{key:"createArc",value:function(e,n,i){var r=360-new t.Vector(e,n).slope,s=new t.Vector(e,i).slope;t.utils.EQ(r,s)&&(s=360);var o=new t.Vector(e,n).length;return new t.Arc(e,o,r,90)}},{key:"findArcPoints",value:function(e,n,i){var r=new t.Vector(e,n),s=r.normalize(),o=e.x+this.rounding*s.x,a=e.y+this.rounding*s.y,h=new t.Point(o,a);r=new t.Vector(e,i),s=r.normalize(),o=e.x+this.rounding*s.x,a=e.y+this.rounding*s.y;var c=new t.Point(o,a);r=new t.Vector(e,c),o=h.x+r.x,a=h.y+r.y;var u=new t.Point(o,a);return[u,h,c]}},{key:"reset",value:function(){if(this.segments=[],this.arcs=[],0==this.rounding){var e=new t.Segment(this.points[0],this.points[1]);this.segments.push(e);var n=new t.Segment(this.points[1],this.points[2]);this.segments.push(n);var i=new t.Segment(this.points[2],this.points[3]);this.segments.push(i);var r=new t.Segment(this.points[3],this.points[0]);this.segments.push(r)}else{var s=new t.Segment(0,0,0,0);this.segments.push(s);var o=new t.Segment(0,0,0,0);this.segments.push(o);var a=new t.Segment(0,0,0,0);this.segments.push(a);var h=new t.Segment(0,0,0,0);this.segments.push(h);var c=this.findArcPoints(this.points[0],this.points[1],this.points[3]);this.arcs.push(this.createArc(c[0],c[1],c[2])),s.ps=c[1].clone(),h.ps=c[2].clone(),c=this.findArcPoints(this.points[1],this.points[2],this.points[0]),this.arcs.push(this.createArc(c[0],c[1],c[2])),s.pe=c[2].clone(),o.ps=c[1].clone(),c=this.findArcPoints(this.points[2],this.points[3],this.points[1]),this.arcs.push(this.createArc(c[0],c[1],c[2])),o.pe=c[2].clone(),a.ps=c[1].clone(),c=this.findArcPoints(this.points[3],this.points[0],this.points[2]),this.arcs.push(this.createArc(c[0],c[1],c[2])),a.pe=c[2].clone(),h.pe=c[1].clone()}}},{key:"resize",value:function(t,e,i){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"resize",this).call(this,t,e,i),this.reset()}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"rotate",this).call(this,t,e),this.reset()}},{key:"contains",value:function(e){if(!a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"contains",this).call(this,e))return!1;var i=new t.Polygon;return this.segments.forEach(function(t){i.add(t.ps),i.add(t.pe)}),i.contains(e)}},{key:"mirror",value:function(t){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"mirror",this).call(this,t);var e=this.points[0];this.points[0]=this.points[1],this.points[1]=e,e=this.points[2],this.points[2]=this.points[3],this.points[3]=e,this.reset()}},{key:"paint",value:function(t){this.segments.forEach(function(e){e.paint(t)}),this.arcs.forEach(function(e){e.paint(t)})}}]),n}(t.Rectangle)}}),require.register("shapes/segment.js",function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n.exports=function(t){t.Segment=function(){function e(){i(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];return 2==r.length&&r[0]instanceof t.Point&&r[1]instanceof t.Point?(this.ps=r[0].clone(),void(this.pe=r[1].clone())):4==r.length?(this.ps=new t.Point(r[0],r[1]),void(this.pe=new t.Point(r[2],r[3]))):void 0}return r(e,[{key:"clone",value:function(){return new e(this.ps,this.pe)}},{key:"middle",value:function(){return new t.Point((this.ps.x+this.pe.x)/2,(this.ps.y+this.pe.y)/2)}},{key:"translate",value:function(t){this.ps.translate(t),this.pe.translate(t)}},{key:"contains",value:function(t){return!1}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};this.ps.rotate(t,e),this.pe.rotate(t,e)}},{key:"mirror",value:function(t){this.ps.mirror(t),this.pe.mirror(t)}},{key:"paint",value:function(t){t.moveTo(this.ps.x,this.ps.y),t.lineTo(this.pe.x,this.pe.y),t.stroke()}},{key:"length",get:function(){return this.ps.distanceTo(this.pe)}},{key:"box",get:function(){return new t.Box(Math.min(this.ps.x,this.pe.x),Math.min(this.ps.y,this.pe.y),Math.max(this.ps.x,this.pe.x),Math.max(this.ps.y,this.pe.y))}}]),e}()}}),require.register("shapes/utils.js",function(t,e,n){"use strict";var i=1e-6;n.exports=function(t){t.utils={DP_TOL:i,drawCrosshair:function(e,n,i){i.forEach(function(i){var r=new t.Segment(i.x-n,i.y,i.x+n,i.y);r.paint(e),r=new t.Segment(i.x,i.y-n,i.x,i.y+n),r.paint(e)})},radians:function(t){return t*Math.PI/180},degrees:function(t){return 180*t/Math.PI},GT:function(t,e){return t-e>i},GE:function(t,e){return t-e>-i},EQ:function(t,e){return t-e<i&&t-e>-i},LT:function(t,e){return t-e<-i},LE:function(t,e){return t-e<i}}}}),require.register("shapes/vector.js",function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n.exports=function(t){t.Vector=function(){function e(){i(this,e),this.x=0,this.y=0;var n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1];return"number"==typeof n&&"number"==typeof r?(this.x=n,void(this.y=r)):n instanceof t.Point&&r instanceof t.Point?(this.x=r.x-n.x,void(this.y=r.y-n.y)):void 0}return r(e,[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"invert",value:function(){this.x=-this.x,this.y=-this.y}},{key:"normalize",value:function(){return new e(this.x/this.length,this.y/this.length)}},{key:"rotate",value:function(e){var n=new t.Point(this.x,this.y);n.rotate(e),this.x=n.x,this.y=n.y}},{key:"rotate90CCW",value:function(){this.x=-this.y,this.y=this.x}},{key:"rotate90CW",value:function(){this.x=this.y,this.y=-this.x}},{key:"angleTo",value:function(t){var e=this.normalize(),n=t.normalize(),i=Math.atan2(e.cross(n),e.dot(n));return i<0&&(i+=2*Math.PI),i}},{key:"projectionOn",value:function(t){var e=t.normalize(),n=this.dot(e);return e.multiply(n),e}},{key:"multiply",value:function(t){this.x=t*this.x,this.y=t*this.y}},{key:"length",get:function(){return Math.sqrt(this.dot(this))}},{key:"slope",get:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e=2*Math.PI+e),t.utils.degrees(e)}}]),e}()}}),require.register("___globals___",function(t,e,n){})}(),require("___globals___");